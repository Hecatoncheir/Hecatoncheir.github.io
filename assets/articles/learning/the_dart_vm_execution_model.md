
Dart использует событийно-ориентированную архитектуру, основанную на однопоточной модели выполнения с одним **циклом событий** и двумя очередями. Dart все еще поддерживает стек вызова. Тем не менее, для передачи контекста между производящим кодом и выполняющим, используются события. Цикл событий (event loop) основывается на одном потоке, так что ничего синхронизировать и лочить не нужно.

> **Заметка:** Цикл событий блокируется с запуском операций, блокирующих все приложение.

Сочетание однопоточной модели выполнения и асинхронных операций позволяет приложению работать более эффективно и менее ресурсоёмко.

<p class='column'> Основнaя часть Dart VM это цикл обработки событий (event loop). Независимые части кода могут зарегистрировать функции обратного вызова (callback) для обработки определенных типов событий. <strong>Callback</strong> - это название, данное функциям, которые передаются в качестве аргумента другим функциям. События происходящие по таймеру, события мыши, события ввода или вывода информации и много других событий происходящих в системе, зарегистрированы в очереди событий. Цикл обработки событий последовательно обрабатывает события в очереди, выполняя связанные функции обратного вызова.</p>

> **Заметка:** Для предотвращения блокировки цикла обработки событий, функции обратного вызова должны ориентироваться на выполнение одной небольшой конкретной операции.

<p class="column">
Dart поддерживает анонимные функции и замыкания, для удобного определения обратных вызовов. Функции обратного вызова сами по себе являются замыканием. После того, как callback выполнится, состояние вновь перейдет в цикл обработки событий. Функции обратного вызова никогда не выполняются параллельно, потому как это однопоточная операция и возникновение конфликтных ситуацией невозможно.
После того как callback был выполнен, цикл событий извлекает следующее событие из очереди и применяет функцию обратного вызова, зарегистрированную для этого события.
Dart вводит новый термин для задач, которые должны быть выполнены позже: <strong>microtasks</strong>. Как следует из названия микротаск это краткосрочная функция, которая выполняет небольшой код, который, к примеру, обновляет состояние переменных или отправляет новое событие. Dart VM предусматривает специальную очередь для микротасков. Очередь микротасков и очередь событий находятся в одном цикле событий. Тем не менее, очередь микротасков имеет более высокий приоритет, чем очередь событий. Цикл обработки событий обработает сразу все микротаски. Затем он переходит к очереди событий и обрабатывает по одному событию в цикле. Долго выполняющийся код в очереди микротасков увеличивает риск задержки обработки событий и может привести к снижению отзывчивости приложения.
</p>

> **Заметка** Главное быть уверенным в том, что микротаски небольшого размера. Эти функции должны выполнять минимум операций и быть максимально короткими. Иначе Dart VM не запустит цикл обработки событий и не будет возможности изменять его или управлять им. Необходимо иметь в виду, что последовательность выполнения событий определена очередью событий. Нужно принимать во внимание и тот факт, что время обработки следующего события в цикле обработки событий, совершенно не известно.